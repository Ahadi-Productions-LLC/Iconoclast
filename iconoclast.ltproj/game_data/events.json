[
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_unit;Talib;immediate",
            "remove_unit;MahmoudE;immediate",
            "remove_group;Enemy1;Immediate",
            "transition;open",
            "add_unit;MahmoudE;14,8  ",
            "add_unit;Hawa;14,7;stacking",
            "move_cursor;14, 8",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "add_portrait;Mahmoud;Right",
            "add_portrait;Hawa;Left",
            "speak;Mahmoud;Do you smell the rot? The temple is just ahead, and it seems the Archtree is in a fell mood. | Were you to turn back, none would hold it against you.",
            "speak;Hawa;My lord, I trust in your abilities implicity, as you should mine. | So long as your lance remains true and my research undisturbed, I shall serve.",
            "speak;Mahmoud; Would that I had your confidence. It might-| I hear wings, and the restless dead. | Something has disturbed the temple. Stay behind me, I fear the worst.",
            "transition;Close",
            "change_background",
            "end_skip",
            "transition;open",
            "move_unit;MahmoudE;10,7",
            "move_unit;Hawa;10,8",
            "wait;250",
            "remove_unit;Hawa",
            "add_group;Enemy1",
            "add_unit;Talib;3,1",
            "move_unit;Talib;3,2",
            "move_cursor;3,2",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "add_portrait;Talib;Left",
            "speak;Talib;Living visitors! Well, I wasn't expecting an interruption. | Saba, what should we do about our guests?",
            "add_portrait;Saba;Right",
            "speak;Saba;[Enthusiastic roaring.]",
            "remove_portrait;Saba",
            "speak;Talib;That seems a bit harsh. Let's see if they're up for some conversation. "
        ],
        "nid": "0 Intro"
    },
    {
        "name": "DeathSeth",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Seth'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Seth;FarRight",
            "speak;Seth;Urgh...|My apologies. I must withdraw.",
            "expression;Seth;CloseEyes",
            "remove_portrait;Seth"
        ],
        "nid": "Global DeathSeth"
    },
    {
        "name": "DeathJoshua",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Joshua'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Joshua;FarRight",
            "speak;Joshua;I... I guess my luck finally ran out...|Heh.",
            "expression;Joshua;CloseEyes",
            "remove_portrait;Joshua"
        ],
        "nid": "Global DeathJoshua"
    },
    {
        "name": "DeathNeimi",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Neimi'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Neimi;FarRight",
            "speak;Neimi;You were right, Colm...|I am a klutz. Sorry...",
            "expression;Neimi;CloseEyes",
            "remove_portrait;Neimi"
        ],
        "nid": "Global DeathNeimi"
    },
    {
        "name": "DeathNatasha",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Natasha'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Natasha;FarRight",
            "if;game.level.nid == '5'",
            "speak;Natasha;I can't let myself die here...|Someone has to hear my tale...",
            "else",
            "speak;Natasha;My fate is irrelevant...|The world must have... light.",
            "end",
            "expression;Natasha;CloseEyes",
            "remove_portrait;Natasha"
        ],
        "nid": "Global DeathNatasha"
    },
    {
        "name": "DeathLute",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Lute'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Lute;FarRight",
            "speak;Lute;I...{br}I don't want to die...",
            "expression;Lute;CloseEyes",
            "remove_portrait;Lute"
        ],
        "nid": "Global DeathLute"
    },
    {
        "name": "DeathVanessa",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Vanessa'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Vanessa;FarRight",
            "speak;Vanessa;Please...|Forgive me...",
            "expression;Vanessa;CloseEyes",
            "remove_portrait;Vanessa"
        ],
        "nid": "Global DeathVanessa"
    },
    {
        "name": "DeathMoulder",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Moulder'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Moulder;FarRight",
            "speak;Moulder;I am sorry. I believe this is as far as I go...",
            "expression;Moulder;CloseEyes",
            "remove_portrait;Moulder"
        ],
        "nid": "Global DeathMoulder"
    },
    {
        "name": "DeathRoss",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Ross'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Ross;FarRight",
            "speak;Ross;I... am a warrior to the very end.",
            "expression;Ross;CloseEyes",
            "remove_portrait;Ross"
        ],
        "nid": "Global DeathRoss"
    },
    {
        "name": "DeathGarcia",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Garcia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Garcia;FarRight",
            "speak;Garcia;I have no regrets.{br}This was always my fate.",
            "expression;Garcia;CloseEyes",
            "remove_portrait;Garcia"
        ],
        "nid": "Global DeathGarcia"
    },
    {
        "name": "DeathGilliam",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Gilliam'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Gilliam;FarRight",
            "speak;Gilliam;I was prepared for...{br}anything...",
            "expression;Gilliam;CloseEyes",
            "remove_portrait;Gilliam"
        ],
        "nid": "Global DeathGilliam"
    },
    {
        "name": "DefeatMahmoud",
        "trigger": "unit_death",
        "level_nid": "0",
        "condition": "unit.nid == \"MahmoudE\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "multi_add_portrait;MahmoudE;Right;Talib;Left",
            "speak;Talib;Surrender! I'm here to kill beasts, not men.",
            "speak;MahmoudE;So be it! I yield.",
            "remove_portrait;MahmoudE",
            "remove_portrait;Talib"
        ],
        "nid": "0 DefeatMahmoud"
    },
    {
        "name": "DeathSaar",
        "trigger": "unit_death",
        "level_nid": "5",
        "condition": "unit.nid == \"Saar\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Saar;Left",
            "speak;Saar;Emperor Vigarde...{br}Glory to His...Majesty...",
            "expression;Saar;CloseEyes",
            "remove_portrait;Saar"
        ],
        "nid": "5 DeathSaar"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "add_portrait;Talib;Left;no_block",
            "multi_add_portrait;Hawa;FarRight;Mahmoud;Right",
            "speak;Talib;Well, then, my lord. Who are you and your friend, why are you here, and what can you pay for ransom?",
            "speak;Mahmoud;I am Mahmoud, rightful lord of Urgarh. | Among my duties are yearly audiences with the local spirits. ",
            "speak;Talib;Saleh seemed in no hurry.",
            "speak;Mahmoud;Saleh is in no hurry to do many things he ought.",
            "speak;Hawa;I am Hawa. A scholar and student of history. | Lord Mahmoud graciously offered to escort me while I studied the ruins, in exchange for a mild service.",
            "speak;Talib;What sort of service?",
            "speak;Hawa;I would not betray his confidence.",
            "speak;Mahmoud;She was to diagnose any maladies plaguing the spirits I spoke to, then treat any wounds I suffered.",
            "speak;Talib;You're a doctor?",
            "speak;Mahmoud;She-",
            "speak;Hawa;I'm a surgeon, actually. Better with beasts and monsters than people, but I've no complaints so far.",
            "speak;Talib;Are you looking for work?",
            "speak;Hawa;I've enough coin to ransom myself.",
            "speak;Talib;I am Talib. Commander of the White Chain. We mean to kill the Archtree. | Treat our wounded from the battle, and you'll be free, fed, and filthy rich.",
            "speak;Hawa;... | ... |...And you'll let Lord Mahmoud free? And treat him well while he's prisoner?",
            "speak;Mahmoud;You do not need to-",
            "speak;Talib;I treat bandits to three square meals and a comfortable-enough tent. The Lord will be very comfortable until he secures some coin.",
            "speak;Hawa;You're quite generous, for a mercenary. I accept.",
            "change_team;Hawa;player",
            "transition;Close"
        ],
        "nid": "0 Outro"
    },
    {
        "name": "OnlyBoss",
        "trigger": "combat_end",
        "level_nid": "0",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Talib;Left",
            "speak;Talib;And now to talk with these mysterious strangers",
            "remove_portrait;Talib  ",
            "change_team;MahmoudE;enemy",
            "change_ai;MahmoudE;Attack"
        ],
        "nid": "0 OnlyBoss"
    },
    {
        "name": "Defeat Boss",
        "trigger": "combat_end",
        "level_nid": "0",
        "condition": "game.check_dead(\"MahmoudE\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "0 Defeat Boss"
    },
    {
        "name": "Defeat Boss",
        "trigger": "combat_end",
        "level_nid": "5",
        "condition": "game.check_dead(\"Saar\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "5 Defeat Boss"
    },
    {
        "name": "Combat Start",
        "trigger": "combat_start",
        "level_nid": "0",
        "condition": "check_pair('Talib',\"MahmoudE\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Mahmoud;Left",
            "add_portrait;Talib;Right",
            "speak;Mahmoud;You trespass on sacred grounds and butcher the restless dead. | Speak, or I shall take offense at your impropriety.",
            "speak;Talib;Trespass? How cruel. | The local lord has invited me to deal with his monster problem. | And the villagers are less than thrilled at their children being torn asunder by these fine corpses. | Surely I'm owed better than common banditry?",
            "speak;Mahmoud;Lies. I rule these lands, as my father before me. | And the Archtree has harmed none since my grandfather's childhood.",
            "speak;Talib;You may be rich for a bandit, but you're rather poor to be a lord.",
            "speak;Mahmoud;You'll find that poverty has weakened neither lance nor law.",
            "speak;Talib;I've a hunch that a pleasant young man in Urgarh might disagree.",
            "speak;Mahmoud;Saleh sent you? That explains much. | Your contract is invalid, mercenary. My brother has no authority to send you here. Flee or die.",
            "speak;Talib;I'll let Saba speak for me.",
            "add_portrait;Saba;CenterRight",
            "speak;Saba;[Unintelligible draconic roar]",
            "remove_portrait;Saba",
            "speak;Talib;I'm afraid she's unimpressed! Take your best shot, my lord.",
            "remove_portrait;Mahmoud",
            "remove_portrait;Talib"
        ],
        "nid": "0 Combat Start"
    },
    {
        "name": "FightSaar",
        "trigger": "combat_start",
        "level_nid": "5",
        "condition": "unit.nid == \"Saar\" or unit2.nid == \"Saar\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Saar;Left",
            "speak;Saar;Enemy of the empire!{br}Death's too good for you!",
            "remove_portrait;Saar"
        ],
        "nid": "5 FightSaar"
    },
    {
        "name": "Slay",
        "trigger": "combat_death",
        "level_nid": "1",
        "condition": "game.check_dead(\"Archtree\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "1 Slay"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_group;EnemyRein;immediate",
            "remove_group;Enemy1;immediate",
            "remove_group;Player1;immediate",
            "change_background;Ruins",
            "transition;open",
            "multi_add_portrait;Talib;left;Mahmoud;OffscreenLeft;Hawa;FarLeft ",
            "speak;Talib;Lena! Yazid! We've got guests.",
            "multi_add_portrait;Leda;Right;Yazid;FarRight",
            "speak;Yazid;And here I stand, with no time to clean up the place. | Leda, this shan't stand. Please, throw them into a pit for me.",
            "speak;Leda;You got it boss.",
            "speak;Talib;Don't scare our guests! | This is Hawa, who'll be our surgeon for this job.",
            "speak;Yazid;",
            "speak;Mahmoud;I am Mahmoud. Rightful lord of Urgarh.",
            "",
            "remove_portrait;Mahmoud",
            "transition;Close",
            "change_background",
            "end_skip",
            "transition;open",
            "",
            "",
            "remove_portrait;Hawa",
            "add_group;Player1;starting",
            "",
            "add_portrait;Archtree",
            "",
            "add_group;Enemy1",
            "transition;close",
            ""
        ],
        "nid": "1 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Fade to black",
            "transition;Close",
            "change_background;Ruins",
            "transition;Open",
            "",
            "transition;Close",
            "end_skip",
            "",
            "# Let's have some fun in the overworld",
            "change_background",
            "# This command is necessary to load the overworld tilemap",
            "overworld_cinematic;1",
            "# The next two commands are self-explanatory. You'll use these to manipulate overworld data.",
            "reveal_overworld_node;0;immediate",
            "set_overworld_position;Talib;0",
            "",
            "# Here are examples of overworld animations and sounds.",
            "# Notice that they are the same as the normal tilemap commands.",
            "transition;open;1500",
            "wait;1000",
            "sound;RefreshDance",
            "map_anim;AOE_Mend;2",
            "reveal_overworld_node;1",
            "wait;500",
            "sound;Mend",
            "reveal_overworld_road;0;1",
            "",
            "# Because narration is more involved than dialogue, we need some different commands",
            "# to animate the narration window in.",
            "toggle_narration_mode;open;1000",
            "wait;500",
            "narrate;Narrator;With the Archtree dead, Talib and the White Chain head back to civilization and payment.",
            "overworld_move_unit;Talib;2;no_block",
            "narrate;Narrator;Alongside them .",
            "wait;500",
            "transition;close",
            "toggle_narration_mode;close",
            "",
            "change_background;combat_outside_castle",
            "wait;1000",
            "transition;open"
        ],
        "nid": "1 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Setup",
            "game_var;_convoy;True",
            ""
        ],
        "nid": "2 Intro"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Iron Lance,Slim Lance,Iron Axe",
            "transition;Open"
        ],
        "nid": "2 Armory"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Steel Sword,Iron Lance,Slim Lance,Steel Lance,Iron Axe,Steel Axe,Iron Bow,Steel Bow",
            "transition;Open"
        ],
        "nid": "5 Armory"
    },
    {
        "name": "Vendor",
        "trigger": "Vendor",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Heal,Vulnerary,Fire,Shine;Vendor",
            "transition;Open"
        ],
        "nid": "5 Vendor"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Tethys;Left",
            "speak;Tethys;Oh, hello.{br}Did you come to see me dance?|I'm sorry, but I just finished a few moments ago.{w}{clear}Oh, by the way...Would you be interested in one of these items?|A wealthy patron left me a small ransom in gifts after watching my performance.|You can sell one for gold if you'd like or use them to improve your skills.|I simply cannot carry all of this by myself, so please, take this one.|Wealth is useless if you can't use it to bring happiness to others, right?| Thanks for dropping by. Perhaps we'll meet again someday.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Dragonshield",
            "show_layer;Village1",
            "has_traded;{unit}"
        ],
        "nid": "5 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Man2;Left",
            "speak;Man2;Life in Serafew's been harder since the Grado occupation force took over here.|Serafew's got Renais citizens as well as Grado, but it's been hardest on us.|They've singled out families from Renais for the most awful atrocities.{w}{clear}Please, traveler, take this sword.|It's an armorslayer. It'll cut through even the strongest armor.|Take it and strike down that blackheart, Saar.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Armorslayer",
            "show_layer;Village2",
            "has_traded;{unit}"
        ],
        "nid": "5 Village2"
    },
    {
        "name": "Village3",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;OldMan1;Left",
            "speak;OldMan1;In my youth, I was a knight of some renown, I'll have you know.|I've even crossed blades with one of Grado's most famous generals, I have.|Ah, but I'm an old man now...|I'm starting to worry... What if I die without passing on my techniques?|So I decided to write down what I've learned in a book. I have it here.|You seem like a strong warrior. I'd be honored if you would accept it.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Secret Book",
            "show_layer;Village3",
            "has_traded;{unit}"
        ],
        "nid": "5 Village3"
    },
    {
        "name": "Village4",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Amelia;Left",
            "speak;Amelia;Hope everyone's well back home in Silva. Just a bit more, and I'll be in the empire.|Let's see, I've got vulneraries, antitoxins...|Oh! And I can't let myself forget torches for when it gets dark.|Yep! I'm all set!{br}Now I just need to get to the capital.|I'll be the finest soldier the Grado army's ever seen! I swear it!",
            "remove_portrait;Amelia",
            "add_portrait;{unit};Right",
            "speak;{unit};Hm... What's this?",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Torch",
            "show_layer;Village4",
            "has_traded;{unit}"
        ],
        "nid": "5 Village4"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "4",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Left;no_block",
            "add_portrait;Man1;Right",
            "speak;Man1;Do you see that old snag to the south of here?|Bet it would make a handy bridge if you could knock it over.|Take a weapon to it and give it a few good whacks. That should do it.|Here, take this and give it a try.{br}It ought to do the trick.",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;{unit};Iron Axe",
            "has_traded;{unit}"
        ],
        "nid": "4 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "4",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Lute;Left",
            "# Artur Convo",
            "if;unit.nid == 'Artur'",
            "speak;{unit};Lute, help has arrived.",
            "speak;Lute;......",
            "speak;{unit};Lute?",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.",
            "speak;{unit};Well, I should hope not! I wanted you to know help has arrived.|Please be patient a bit longer...",
            "speak;Lute;No, no. I insist on joining you in combat.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "# Eirika Convo",
            "elif;unit.nid == 'Eirika'",
            "speak;{unit};Who are you?",
            "speak;Lute;......",
            "speak;{unit};Um...",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.",
            "speak;{unit};No, I'm not{br}Are you from around here?|There are still monsters about, so you should stay in--",
            "speak;Lute;No, no. I insist on joining you in combat.|My name is Lute. I'm a mage of superior wisdom and rare ability.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "speak;{unit};What an odd girl...",
            "# Other Convo",
            "else",
            "speak;Lute;......",
            "speak;{unit};Hm?",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.|I've decided to join you in battle now.|My name is Lute. I'm a mage of superior wisdom and rare ability.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "end",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "# Recruit Lute",
            "change_team;Lute;player",
            "add_unit;Lute;1,12;immediate;closest",
            "transition;Open",
            "has_traded;{unit}"
        ],
        "nid": "4 Village2"
    },
    {
        "name": "NatashaJoshuaTalk",
        "trigger": "on_talk",
        "level_nid": "5",
        "condition": "unit.nid == 'Natasha' and unit2.nid == 'Joshua'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Natasha;Left;no_block",
            "add_portrait;Joshua;Right",
            "speak;Natasha;You...You're that man I met...|Are you here to capture me? You've been hired to silence me, haven't you...",
            "speak;Joshua;Yeah, Grado's paying the bill.{br}They want you dead, you know?|But don't feel bad. It's not personal.",
            "speak;Natasha;Wait, please...|It doesn't matter what happens to me, but you must hear my words.|The emperor of Grado is changed.{br}He is not the man he once was.|The other nations must be warned before he extinguishes all light from out lands.",
            "speak;Joshua;Hey, no offense, but I'm just a mercenary. I don't care about Grado or its emperor.|Everything you say may be true, or it may be lies. I don't care either way.",
            "speak;Natasha;But that's...",
            "speak;Joshua;Even so...Killing a beautiful lady like you would leave a bad taste in my mouth.{w}{clear}Tell me, do you like to gamble?",
            "speak;Natasha;What?!",
            "speak;Joshua;Gambling's what I live for. Even when I lose, I never want to stop.|Let's have us a little wager.{br}If you win, I'll believe you.|Heads or tails, you call it.",
            "speak;Natasha;You can't...{br}This is no time for games...",
            "speak;Joshua;Would you rather I get on with the job I was hired for?",
            "speak;Natasha;......{br}Um, heads...|No! Tails!",
            "speak;Joshua;All right. So I'm heads, and you're tails.|Here we go.|... ... ...",
            "speak;Natasha;......{br}Which...Which is it?",
            "speak;Joshua;What do you know?!{w}{clear}It's tails. You win. Figures. I haven't won anything all day.|Well, Lady Luck has spoken.{br}Guess I'm on your side now.",
            "speak;Natasha;Are you serious?",
            "speak;Joshua;Yeah. Sure, I might cheat, but I never worm out of a bet. It's a rule of mine.",
            "speak;Natasha;Oh, thank heaven! Thank you, blessed light, for your protection!",
            "speak;Joshua;I got nothing against heaven, but I'm right here if you want someone to thank...|No? Well, get behind me then. I've got to take care of these fools.",
            "remove_portrait;Natasha;no_block",
            "remove_portrait;Joshua",
            "change_team;Joshua;player"
        ],
        "nid": "5 NatashaJoshuaTalk"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "2 Outro"
    },
    {
        "name": "Test",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#level_var;_fog_of_war;1",
            "#level_var;_fog_of_war_radius;3",
            "#level_var;_ai_fog_of_war_radius;5",
            "add_lore;Eirika",
            "add_base_convo;Dreams of Home",
            "add_weather;rain",
            "game_var;_supports;True",
            "#trigger_script;Trigger",
            "base;Clearing",
            "#music;Attack;2000",
            "#wait;5000",
            "#music;Armory;2000",
            "#wait;5000",
            "#music;Attack;2000",
            "#wait;5000",
            "#music;None;2000",
            "#wait;5000",
            "#music;Attack;2000",
            "#wait;5000"
        ],
        "nid": "DEBUG Test"
    },
    {
        "name": "DestroyVillage1",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin1",
            "wait;500"
        ],
        "nid": "5 DestroyVillage1"
    },
    {
        "name": "DestroyVillage2",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin2",
            "wait;500"
        ],
        "nid": "5 DestroyVillage2"
    },
    {
        "name": "DestroyVillage3",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin3",
            "wait;500"
        ],
        "nid": "5 DestroyVillage3"
    },
    {
        "name": "DestroyVillage4",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin4",
            "wait;500"
        ],
        "nid": "5 DestroyVillage4"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "DEBUG",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_team;Bone;player",
            "game_var;EirikaSupport;True"
        ],
        "nid": "DEBUG Turn2"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Iron Lance,Slim Lance,Iron Axe;armory",
            "transition;Open"
        ],
        "nid": "DEBUG Armory"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "2 Rout"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "4",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "4 Rout"
    },
    {
        "name": "Rout (1)",
        "trigger": "combat_end",
        "level_nid": "DEBUG",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "DEBUG Rout (1)"
    },
    {
        "name": "Door1",
        "trigger": "Door",
        "level_nid": "DEBUG",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "give_item;{unit};Iron Sword"
        ],
        "nid": "DEBUG Door1"
    },
    {
        "name": "Snag",
        "trigger": "unit_death",
        "level_nid": "4",
        "condition": "unit.nid == 'Snag'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Snag"
        ],
        "nid": "4 Snag"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Initial setup",
            "set_stats;Boss;HP,39,STR,5,SKL,1,SPD,2,LCK,2,DEF,1,RES,0;immediate",
            "add_tag;Boss;Boss",
            "remove_group;PlayerTeam;immediate",
            "remove_group;EnemyArmy;immediate",
            "remove_unit;Artur;immediate",
            "remove_unit;L'arachel;immediate",
            "remove_unit;Dozla;immediate",
            "remove_unit;Rennac;immediate",
            "# Start chapter",
            "chapter_title",
            "move_cursor;0,0;immediate",
            "transition;Open",
            "spawn_group;PlayerTeam;North;Starting",
            "flicker_cursor;Eirika",
            "# Main Script",
            "transition;Close",
            "change_background;DeepForest",
            "transition;Open",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "speak;Seth;We're approaching Serafew, at the border of Renais and Grado.|Once we cross, we'll be in Grado...{br}Renvall won't be much farther.",
            "speak;Eirika;That is, assuming we can cross the border without mishap...|Oh!{br}Look! Over there!",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close",
            "change_background",
            "# Add the enemy army back to the map",
            "add_group;EnemyArmy;Starting;immediate",
            "# (Screen goes to the map, with monsters spreading everywhere)",
            "transition;Open",
            "flicker_cursor;Eirika",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "speak;Eirika;Those strange figures...{br}What...What are they?|Are they...human?",
            "speak;Seth;I've never seen anything like it. What could they be?",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "# (Screen goes to a southern village with Artur and Lute)",
            "transition;Close",
            "center_cursor;1,11;immediate",
            "transition;Open",
            "flicker_cursor;1,11",
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Lute;Left;no_block",
            "add_portrait;Artur;Right",
            "speak;Artur;What have we done to deserve the trials before us? What is happening to us?|How could such abominations walk our lands while the Sacred Stones protect us?",
            "speak;Lute;......",
            "speak;Artur;Lute, please, it's dangerous outside the walls. Stay here in the village.",
            "speak;Lute;Those are revenants, aren't they?|They were the vanguard of the Demon King in the days of darkness.|The Tome of Nazania describes them in chapter 2, section 7, paragraph 8.",
            "speak;Artur;You know of them?",
            "speak;Lute;Duh! I'm a prodigy. I can recall almost everything I see or hear.|According to the book, revenants attack using razor-sharp claws.|Sounds painful, wouldn't you say?",
            "speak;Artur;Yes, er, well... Be that as it may, I must go aid those travelers outside.|You should stay here within the safety of the village.",
            "speak;Lute;Very well. I don't mind staying here. In fact, it seems the smarter choice.",
            "# (Artur leaves)",
            "remove_portrait;Artur",
            "speak;Lute;Magic is far more powerful than any monster's claws.|The thickest hide and the strongest armor are useless against magic's power.|Yes, I suppose I could have studied swords, but only magic is worthy of me.|Even if this village were to be assaulted by monsters, I could defend it perfectly.",
            "remove_portrait;Lute",
            "transition;Close",
            "change_background",
            "center_cursor;Eirika;immediate",
            "add_unit;Artur;8,10;immediate",
            "transition;Open",
            "# Artur runs up to Eirika's group",
            "move_unit;Artur;no_follow",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Right;no_block",
            "add_portrait;Eirika;MidLeft",
            "speak;Artur;Travelers, you must listen to me! The ancient forest of Za'ha is dangerous.|Head south and pass through this place before the fiends surround you!",
            "speak;Eirika;Who are you?",
            "speak;Artur;My name is Artur.|The temple has assigned me the task of cleansing the forest of these...things.|There are so many of the fiends, though.{br}I wonder if I stand much chance alone.|So if you would, please flee now while you have the chance.",
            "speak;Eirika;Fiends?|You're not talking about the same fiends that served the ancient Demon King?|That can't be right... They're nothing but legends and fairy tales...",
            "speak;Artur;Yes, I felt the same way when I heard.|And yet here they are. This place is filled with them.|I wonder how far they've spread...{br}Surely they're not in Renais alone.",
            "speak;Eirika;But...why are they here? How?",
            "add_portrait;Seth;FarLeft",
            "speak;Seth;Beware, Your Highness!{br}Something approaches!",
            "multi_remove_portrait;Eirika;Seth;Artur",
            "# (A Mogall fly towards Artur)",
            "move_unit;Mogall;9,3",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Left",
            "speak;Artur;Please allow me to deal with this.",
            "speak;Artur;Evil shade! May the blessed light drive you from this land!",
            "remove_portrait;Artur",
            "# (Artur slays the Mogall)",
            "interact_unit;Artur;Mogall;hit1,crit1,end",
            "flicker_cursor;Eirika",
            "add_portrait;Seth;Left",
            "speak;Seth;We ought to help. He can't fight them all alone. Do you have orders?",
            "remove_portrait;Seth",
            "# Show prep screen last",
            "end_skip",
            "prep;1",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Right",
            "speak;Artur;One of my companions is in that village to the south.|If you can get there swiftly, I implore you to watch over her safety.",
            "remove_portrait;Artur"
        ],
        "nid": "4 Intro"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;14,8",
            "spawn_group;Turn2Rein;East;Turn2Rein"
        ],
        "nid": "4 Turn2"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,16",
            "add_group;Brigand1;Brigand1",
            "flicker_cursor;14,16",
            "add_portrait;Bandit1;FarRight",
            "speak;Bandit1;Look at this. Now's our chance!|C'mon, lads!|Let's join the fights and steal our way through this pathetic town!",
            "remove_portrait;Bandit1"
        ],
        "nid": "5 Turn2"
    },
    {
        "name": "Turn4",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,7",
            "add_group;Brigand2;Brigand2"
        ],
        "nid": "5 Turn4"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,0",
            "add_group;Brigand3;Brigand3"
        ],
        "nid": "5 Turn8"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;14,0",
            "add_unit;L'arachel;13,0;immediate;stack",
            "add_unit;Dozla;12,0;immediate;stack",
            "add_unit;Rennac;14,0;immediate;stack",
            "move_unit;L'arachel;;;closest;no_block",
            "move_unit;Dozla;;;closest;no_block",
            "move_unit;Rennac;;;closest",
            "wait;50",
            "flicker_cursor;L'arachel",
            "add_portrait;L'arachel;Right",
            "speak;L'arachel;Oh, my!|Those travelers are being besieged by the agents of evil!",
            "add_portrait;Dozla;MidLeft",
            "speak;Dozla;Ha ha ha! Right you are, Lady L'Arachel!",
            "speak;L'Arachel;I cannot allow this to happen!{br}Come!|We must charge down these cliffs and rush to their aid!",
            "add_portrait;Rennac;FarLeft",
            "speak;Rennac;We charge down these cliffs, and the only thing we'll be rushing to is death.|How about we find us a nice, gentle path down, hm?",
            "speak;L'arachel;Ah...Yes, well...Let us hurry nonetheless.|I simply cannot abide those wicked beasts running amok!",
            "remove_portrait;L'arachel;no_block",
            "remove_portrait;Dozla;no_block",
            "remove_portrait;Rennac",
            "remove_unit;Rennac",
            "move_unit;L'arachel;14,2;;closest;no_block",
            "move_unit;Dozla;14,1;;closest;no_block",
            "remove_unit;L'arachel",
            "remove_unit;Dozla"
        ],
        "nid": "4 Turn3"
    },
    {
        "name": "Trigger",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "any(game.level.regions.get('Trigger').contains(unit.position) for unit in game.get_units_in_party())",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;0,0",
            "add_group;RevenantRein;0,0;immediate;stack",
            "move_group;RevenantRein;RevenantRein"
        ],
        "nid": "4 Trigger"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "if;game.check_alive('Artur') or game.check_alive('Lute')",
            "add_portrait;Seth;MidLeft;no_block",
            "add_portrait;Eirika;FarLeft;no_block",
            "if;game.check_dead('Artur')",
            "add_portrait;Lute;Right",
            "elif;game.check_dead('Lute')",
            "add_portrait;Artur;Right",
            "else",
            "add_portrait;Artur;MidRight;no_block",
            "add_portrait;Lute;FarRight",
            "end",
            "else",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "end",
            "speak;Seth;We've killed all the monsters.|Still, we'd best burn the bones to ash to be sure they don't return.;low_priority",
            "speak;Eirika;I still can't believe what we've been fighting here...|I'd thought those fiends nothing more than myth and legend.",
            "speak;Seth;Those revenants are said to be the least of the dark creatures.|And yet, the weakest of them could outmatch any normal man.|We cannot take this enemy lightly.;low_priority",
            "if;game.check_alive('Lute')",
            "speak;Lute;Oh, yes. There are much worse then those revenants and the entombed...|Let's see, there's the bonewalkers, mauthe doogs, gargoyles, baels... |Why, I'll bet you just about any creature of lore could be walking again.|Yes, we're in for some trouble. Even my fabulous power may not be enough.",
            "end",
            "if;game.check_alive('Artur')",
            "speak;Artur;O divine light, show me... Is this a sign of dark days to come?;low_priority",
            "end",
            "remove_portrait;Lute",
            "remove_portrait;Artur",
            "if;game.check_alive('Artur') or game.check_alive('Lute')",
            "remove_portrait;Seth",
            "move_portrait;Eirika;Left",
            "speak;Eirika;By all that's holy, what is happening?",
            "add_portrait;Seth;Right",
            "else",
            "speak;Eirika;By all that's holy, what is happening?",
            "end",
            "speak;Seth;Princess Eirika, perhaps it would be wise to return to Frelia and regroup.|Pressing forward seems foolish in light of recent events.|We cannot face both Grado's forces and more of those terrible things.",
            "speak;Eirika;Seth, I follow your point, and nothing would please me more then running for safety.|But what of my brother? He and his men are still trapped in the same situation we are.|I know full well that I may be leading us into even greater danger, but...|Please try to understand.",
            "speak;Seth;I do, my princess, and I vow to see you through this safely.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "change_background",
            "add_unit;Eirika;8,5;immediate",
            "add_unit;Seth;8,4;immediate",
            "transition;Open",
            "# (L'arachel and her gang rides up)",
            "# remove all units",
            "add_group;LGang;14,5;;stack",
            "move_group;LGang;LGang",
            "flicker_cursor;L'arachel",
            "transition;close",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Eirika;Left",
            "add_portrait;L'arachel;OffscreenRight;immediate",
            "move_portrait;L'arachel;MidRight",
            "speak;L'arachel;Aha! Foul creatures, beware!|I, L'arachel, bestow upon you the honor at banishment at my blessed hands!",
            "speak;Eirika;......",
            "speak;L'arachel;Oh...Where are the monsters?",
            "speak;Eirika;Well, we just finished...",
            "speak;L'arachel;Ah, glad tidings indeed!{br}The heavens must be rejoicing!|I am...a tad disappointed however.|After all, I did rush all the way here to show you the splendor of my might.",
            "add_portrait;Dozla;FarRight",
            "speak;Dozla;Gwah ha ha! It's a real shame, innit, Lady L'Arachel?!",
            "remove_portrait;Dozla",
            "add_portrait;Rennac;FarRight",
            "speak;Rennac;What's shameful is the way you drag us around the countryside.",
            "remove_portrait;Rennac",
            "speak;Eirika;Pardon me, but...who are you?",
            "speak;L'arachel;Me?|Since you ask, please allow me to introduce myself.|It is I, the true light and glory of the sacred realm of Rausten...",
            "add_portrait;Dozla;FarRight",
            "speak;Dozla;Stop! Lady L'arachel, you mustn't continue!|You cannot reveal your true identity here!",
            "speak;L'arachel;Oh, yes, you're right. Oh, I get so careless sometimes!|Now, I must ride off in anonymity. Oh, how beautifully romantic!",
            "speak;Eirika;Uh... Right.",
            "speak;L'arachel;Fare thee well, strangers.{br}Perhaps our paths will cross again.|Come, Dozla! Rennac!{br}We ride!",
            "remove_portrait;L'arachel",
            "speak;Dozla;Gwah ha ha!{br}Let's go, Rennac!",
            "remove_portrait;Dozla",
            "add_portrait;Rennac;FarRight",
            "speak;Rennac;All right, all right.",
            "remove_portrait;Rennac",
            "# (They leave)",
            "speak;Eirika;...What was that about?"
        ],
        "nid": "4 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "change_background;Village",
            "remove_all_units",
            "add_unit;Joshua;9,6;immediate",
            "transition;Open",
            "add_portrait;Joshua;Left",
            "speak;Joshua;Well, well. There's an arena in this town.|Perfect. My pocket's feeling a bit light.",
            "speak;Joshua;Say, is that a cleric? It is!{br}And a gorgeous one at that.",
            "remove_portrait;Joshua",
            "transition;Close",
            "change_background",
            "center_cursor;9,9;immediate",
            "transition;Open",
            "# (Natasha runs past Joshua)",
            "add_unit;Natasha;9,16;immediate",
            "move_unit;Natasha;9,8",
            "move_unit;Joshua;9,7",
            "flicker_cursor;Joshua",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Natasha;Left",
            "move_portrait;Natasha;MidRight",
            "add_portrait;Joshua;Left",
            "speak;Joshua;Something amiss, Sister?{br}You look flustered.",
            "bop_portrait;Natasha",
            "speak;Natasha;Ahhh!",
            "remove_portrait;Natasha",
            "add_portrait;Natasha;Right",
            "speak;Natasha;P-pardon me.",
            "speak;Joshua;No, pardon me! I never meant to startle you.|May I offer my apologies....",
            "speak;Natasha;No, it's not necessary...{br}It was my fault.|Excuse me, I must be going...{br}Good day to you.",
            "# (Natasha leaves)",
            "remove_portrait;Natasha",
            "speak;Joshua;...And there she goes.|Not my lucky day...{br}She was quite the beauty, too.|Ah, such is life. I think I've time still to visit the arena, though.",
            "remove_portrait;Joshua",
            "transition;Close",
            "end_skip",
            "change_background",
            "remove_all_units",
            "# (View moves north, Glen is talking to Saar)",
            "add_unit;Saar;9,7;immediate",
            "load_unit;Cormag;enemy",
            "add_unit;Cormag;8,10;immediate",
            "make_generic;Glen;Wyvern Lord;1;enemy",
            "add_unit;Glen;9,9;immediate",
            "transition;Open",
            "flicker_cursor;Glen",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Saar;Left;no_block",
            "add_portrait;Glen;Right",
            "speak;Glen;Captain Saar of the Serafew Border Guard. How fare you?|I bring orders from His Majesty.|Rumor has it that Princess Eirika of Renais is making her way to Grado.|You are to find her and to place her in custody immediately.",
            "speak;Saar;Yes, sir!",
            "speak;Glen;One more thing...|A traitor to the empire has fled Castle Grado.|We've received reports she is hiding somewhere here in Serafew.|I don't care if you have to tear this town apart. Find the turncoat.",
            "speak;Saar;Yes, sir, General Glen!|If she resists, do we have permission to execute her?",
            "speak;Glen;...Yes. Permission granted.",
            "speak;Saar;Understood! Grado's will be done.|The Grado Empire will repay the debt of betrayal with blood!",
            "speak;Glen;...His Majesty relies upon you, Captain. Be sure his trust is not misplaced.|That is all.",
            "speak;Saar;Yes, sir!",
            "remove_portrait;Saar;no_block",
            "remove_portrait;Glen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# (Saar leaves, Cormag comes)",
            "move_unit;Saar;9,2;no_follow",
            "remove_unit;Saar;immediate",
            "move_unit;Cormag;8,9",
            "flicker_cursor;Glen",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Cormag;Left;no_block",
            "add_portrait;Glen;Right",
            "speak;Glen;Such loyalty to the crown.|If only I could hold such conviction in the righteousness of our emperor.",
            "speak;Cormag;Something troubling you, Brother?",
            "speak;Glen;No...Pay no mind to me.|Come, Cormag. Let's go.|From here, we ride northeast, back to the fort.",
            "speak;Cormag;Very well.",
            "multi_remove_portrait;Cormag;Glen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# (They fly off, replaces by Seth and Eirika, outside the town)",
            "move_unit;Glen;14,5;no_block;no_follow",
            "move_unit;Cormag;14,4;no_follow",
            "remove_unit;Glen",
            "remove_unit;Cormag",
            "transition;Close",
            "change_background;VillageGate",
            "transition;Open",
            "multi_add_portrait;Eirika;Left;Seth;Right",
            "speak;Eirika;It's been so long since I last visited Serafew.|My brother and I used to pass through here en route to Grado.|I remember the harmony in which the people of both countries lived.|No walls divided our borders. No soldiers stood guard in high towers.|The border town... It was to me a symbol of the trust between Grado and Renais.",
            "speak;Seth;...And now, it is firmly under the thumb of Grado's emperor.",
            "speak;Eirika;The peace I remember in this city...|It seems like something from another time. It seems lost now... Forever.",
            "speak;Seth;...The city doesn't seem to be very heavily patrolled.|They must feel it's not worth guarding with Castle Renais under their control.|We must try to not draw attention to ourselves. The west gate is undermanned....",
            "add_portrait;Saleh;OffscreenRight;immediate",
            "speak;Saleh;Pardon me, may I ask you a question?",
            "# (Saleh appears)",
            "remove_portrait;Seth",
            "move_portrait;Eirika;FarLeft",
            "add_portrait;Seth;MidLeft",
            "move_portrait;Saleh;Right",
            "speak;Eirika;What is it?",
            "speak;Saleh;I'm looking for someone.|Have you seen a young girl with indigo hair?",
            "speak;Eirika;Indigo hair?|No...Sorry.",
            "speak;Saleh;Hmmm...|Thank you. Sorry to intrude.",
            "# (Saleh leaves)",
            "multi_remove_portrait;Saleh;Eirika;Seth",
            "multi_add_portrait;Seth;FarLeft;Eirika;MidLeft",
            "speak;Eirika;There was something very odd about that man, wouldn't you say?",
            "speak;Seth;He did seem unusual. He didn't strike me as a Grado spy, but...",
            "add_portrait;SoldierRed;OffscreenRight;immediate",
            "speak;SoldierRed;Catch her! Don't let her escape!",
            "speak;SoldierRed;That way! She went that way!",
            "speak;Eirika;What's that?",
            "speak;Seth;It's coming from over there.",
            "speak;Eirika;Let's see what the commotion is.",
            "multi_remove_portrait;Seth;Eirika",
            "transition;Close",
            "end_skip",
            "change_background",
            "remove_all_units",
            "transition;Open",
            "add_unit;Natasha;10,3;immediate",
            "move_unit;Natasha;9,12",
            "center_cursor;9,10",
            "add_group;ThreeEnemies;ThreeEnemies;immediate",
            "move_group;ThreeEnemies;Starting;no_follow",
            "multi_add_portrait;Natasha;Left;SoldierRed;Right",
            "# (Screen goes to town, there are some soldiers surrounding Natasha)",
            "speak;SoldierRed;Traitor Natasha!{br}Surrender peacefully.|Come quietly, and you may have the chance to explain yourself before His Majesty.",
            "speak;Natasha;Wait, please.{br}You must listen to me!",
            "speak;SoldierRed;Take her.",
            "speak;Natasha;No, you must believe me!|The emperor is not himself. You MUST be able to see that!",
            "speak;SoldierRed;Impugn the emperor at your peril!|We've been ordered to execute you if you offer any resistance.|But your words condemn you!",
            "multi_remove_portrait;Natasha;SoldierRed",
            "end_skip",
            "spawn_group;EnemyTeam;North;Starting;;stack",
            "center_cursor;7,14",
            "add_unit;Eirika;0,16;immediate",
            "add_unit;Seth;0,15;immediate",
            "move_unit;Seth;5,15;no_block",
            "move_unit;Eirika;6,16",
            "flicker_cursor;Seth",
            "multi_add_portrait;Seth;FarLeft;Eirika;MidLeft",
            "speak;Eirika;That cleric is a traitor to the throne of Grado?|What madness is this?",
            "multi_remove_portrait;Seth;Eirika",
            "# (Natasha runs up to Eirika)",
            "move_unit;Natasha;6,15",
            "flicker_cursor;Eirika",
            "multi_add_portrait;Natasha;Left;Eirika;Right",
            "speak;Natasha;Ah...",
            "speak;Eirika;Are you all right?",
            "speak;Natasha;Who are you?",
            "speak;Eirika;I'm from Renais. Why are these Grado men after you?",
            "speak;Natasha;You're from Renais... Oh!|I have something I must tell you. It's about Grado--",
            "speak;Eirika;Wait--Grado soldiers are coming this way.|We'll have to talk later.{br}Now we must fight!",
            "multi_remove_portrait;Natasha;Eirika",
            "transition;Close",
            "move_unit;Eirika;;immediate",
            "move_unit;Natasha;;immediate",
            "remove_unit;Seth;immediate",
            "center_cursor;Eirika;immediate",
            "transition;Open",
            "end_skip",
            "prep;1",
            "# After prep, have Joshua appear",
            "center_cursor;12,6",
            "flicker_cursor;12,6",
            "add_unit;Joshua;12,6",
            "move_unit;Joshua",
            "flicker_cursor;Joshua",
            "add_portrait;Joshua;Right",
            "speak;Joshua;So much for my dreams of making my fortune here...|First the girl, now the gold.{br}It really isn't my lucky day.",
            "add_portrait;SoldierRed;Left",
            "speak;SoldierRed;You there! Mercenary! What are you doing here at the arena?|Get back to the staging area now!",
            "speak;Joshua;C'mon, why don't we both hit the arena?{br}It'll be good training.|If you're going to risk your life anyway, you may as well try to earn some gold.",
            "speak;SoldierRed;I'm reporting you to the captain! You'll be lucky if he just docks your pay!|Don't forget--You can be replaced in an eyeblink, you filthy sellsword!",
            "remove_portrait;SoldierRed",
            "speak;Joshua;Don't worry, little man.{br}I won't forget.|Work's work, but I don't like fighting women...|Now then, what's the rest of the day got in store for me?{w}{clear}...Tails huh? That's nothing but bad luck and more bad luck...",
            "remove_portrait;Joshua",
            "flicker_cursor;Natasha",
            "add_portrait;Natasha;Left",
            "speak;Natasha;They may not want to hear what I have to say, but...|I must speak with one of the Grado soldiers.|Oh, if only one of them will listen to my words...|Please! Grant me strength.",
            "remove_portrait;Natasha",
            "# Now actually start!",
            "add_talk;Natasha;Joshua"
        ],
        "nid": "5 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [],
        "nid": "5 Outro"
    },
    {
        "name": "Debug Setup",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "cf.SETTINGS['debug']",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Give access to the convoy",
            "change_background;BlackBackground",
            "game_var;_convoy;True"
        ],
        "nid": "Global Debug Setup"
    },
    {
        "name": "Dreams of Home",
        "trigger": "on_base_convo",
        "level_nid": "DEBUG",
        "condition": "unit == 'Dreams of Home'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Eirika;Left;Seth;Right",
            "speak;Eirika;I miss home",
            "multi_remove_portrait;Eirika;Seth"
        ],
        "nid": "DEBUG Dreams of Home"
    },
    {
        "name": "Wait",
        "trigger": "unit_wait",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;False",
            "if;True",
            "speak;Joshua;Wow, such wait.",
            "elif;False",
            "speak;Joshua;No",
            "end",
            "end"
        ],
        "nid": "DEBUG Wait"
    },
    {
        "name": "Trigger",
        "trigger": null,
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Eirika;Left",
            "speak;Eirika;This is a test",
            "remove_portrait;Eirika"
        ],
        "nid": "DEBUG Trigger"
    },
    {
        "name": "Summon Phantom",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Phantom')",
            "    resurrect;Phantom",
            "    remove_unit;Phantom;warp",
            "    autolevel_to;Phantom;{e:unit.level}",
            "else",
            "    make_generic;Phantom;Fighter;{e:unit.level};player;;Monster;;Iron Axe",
            "end",
            "add_unit;phantom;{eval:target_pos};warp",
            "wait;200",
            ""
        ],
        "nid": "Global Summon Phantom"
    },
    {
        "name": "Summon Soldiers",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "wait;200"
        ],
        "nid": "Global Summon Soldiers"
    },
    {
        "name": "Support Gain",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;item == 'C'",
            "alert;Reached rank C!",
            "elif;item == 'B'",
            "alert;Reached rank B!",
            "elif;item == 'A'",
            "alert;Reached rank A!",
            "else",
            "alert;Support increased!",
            "end"
        ],
        "nid": "Global Support Gain"
    },
    {
        "name": "OnOverworldEnter",
        "trigger": "overworld_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "sound;RefreshDance",
            "map_anim;AOE_Mend;5",
            "reveal_overworld_node;5",
            "wait;500",
            "sound;Mend",
            "reveal_overworld_road;2;5"
        ],
        "nid": "2 OnOverworldEnter"
    },
    {
        "name": "OnLevelSelect",
        "trigger": "level_select",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "move_cursor;5;2000",
            "toggle_narration_mode;open;1500",
            "wait;500",
            "#add_portrait;Hayden;MidLeft;;;Middle",
            "narrate;Narrator;King Hayden apologizes for being unable to spare soldiers.",
            "remove_portrait;Hayden",
            "toggle_narration_mode;close;1500",
            "overworld_move_unit;Eirika;5;3;no_block",
            "wait;1500",
            "transition;close;1500",
            "wait;500"
        ],
        "nid": "2 OnLevelSelect"
    },
    {
        "name": "Enemy Reinforcements",
        "trigger": "enemy_turn_change",
        "level_nid": "1",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_group;EnemyRein",
            "move_cursor;106",
            "disp_cursor;0",
            "wait;250",
            "disp_cursor;1",
            "add_portrait;Yazid;Left",
            "speak;Yazid;The dead rise, commander. And they seem rather fresher than the rest. | Best we leave some intact,that your new friend might examine them."
        ],
        "nid": "1 Enemy Reinforcements"
    },
    {
        "name": "Defeat",
        "trigger": "unit_death",
        "level_nid": "1",
        "condition": "len(game.get_player_units()) == 3",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "lose_game"
        ],
        "nid": "1 Defeat"
    },
    {
        "name": "Increment Casualties",
        "trigger": "unit_death",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;_casualties;1"
        ],
        "nid": "2 Increment Casualties"
    },
    {
        "name": "Casualties",
        "trigger": "level_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 10,
        "_source": [
            "level_var;_casualties;0"
        ],
        "nid": "2 Casualties"
    },
    {
        "name": "Overkill",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "game.level_vars['_casualties'] == 4",
        "commands": [],
        "only_once": false,
        "priority": 10,
        "_source": [
            "lose_game"
        ],
        "nid": "2 Overkill"
    }
]